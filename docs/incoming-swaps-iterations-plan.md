# План улучшений страницы `/swaps/incoming`

## Цель
Сделать входящие запросы быстрее для принятия решений, прозрачнее по рискам и удобнее в ежедневной работе пользователя.

## Итерация 1 — MVP (2–3 дня)
### Что делаем
1. Добавить фильтр по статусу (`pending`, `accepted`, `completed`) и сортировку (`новые`, `крупные каналы`, `релевантные`).
2. Добавить поиск по названию канала/ID.
3. Добавить время ожидания запроса (`сколько висит`) и визуальный индикатор срочности.
4. Добавить `Переглянути канал` в карточке входящего запроса.
5. При `Відхилити` спрашивать причину отказа (сохранение в аудит-лог).
6. Исправить кодировку проблемных текстов/комментариев на странице и связанных стилях.

### Результат для пользователя
Пользователь быстрее находит нужный запрос, понимает приоритет и может давать структурированный отказ.

### Оценка
- Frontend: 1.5–2 дня
- Backend: 0.5–1 день
- Тесты (unit + functional): 0.5 дня

## Итерация 2 — Middle (3–5 дней)
### Что делаем
1. Добавить мини-аналитику партнера в карточке:
   - `Influence Score`
   - средний рейтинг
   - количество завершенных обменов
   - доля успешных обменов
2. Добавить блок совместимости (ниша/язык/размер канала) с объяснением “почему подходит”.
3. Добавить промежуточные действия:
   - `Уточнити умови`
   - `Запропонувати інший формат`
   - `Відкласти`
4. Добавить бейдж “новые с последнего визита” и действие “пометить прочитанным”.

### Результат для пользователя
Решения принимаются не “на глаз”, а по метрикам и контексту совместимости.

### Оценка
- Frontend: 2–3 дня
- Backend: 1–1.5 дня
- Тесты (unit + functional): 0.5–1 день

## Итерация 3 — Advanced (5–7 дней)
### Что делаем
1. Массовые действия по запросам (архив/отклонить группу).
2. SLA-логика:
   - дедлайн ответа
   - авто-архив старых `pending`
   - напоминания пользователю
3. Улучшить завершение обмена:
   - чек-лист перед `Обмін завершено`
   - мгновенное окно отзыва без перехода на другую страницу
4. Углубить контекст чата:
   - автоподстановка условий обмена в чат
   - быстрые шаблоны сообщений
   - вложения/доказательства выполнения обмена

### Результат для пользователя
Снижается ручная рутина, меньше “зависших” запросов, выше прозрачность и качество завершенных обменов.

### Оценка
- Frontend: 3–4 дня
- Backend: 1.5–2 дня
- Тесты (unit + functional): 1 день

## Технические требования для всех итераций
1. Все изменения БД — только в транзакциях.
2. Все критичные действия — обязательная запись в аудит-лог.
3. Для каждого этапа: unit + functional тесты и обязательный прогон перед релизом.
4. Безопасные миграции: backward-compatible, с rollback-планом.

## KPI после внедрения
1. Среднее время ответа на входящий запрос.
2. Конверсия `pending -> accepted`.
3. Конверсия `accepted -> completed`.
4. Процент запросов с отказом и категорией причины.
5. Процент завершенных обменов с отзывом.

## Рекомендуемый порядок запуска
1. Сначала Итерация 1 (быстрый эффект и чистка UX-блокеров).
2. Затем Итерация 2 (качество решения и релевантность).
3. Затем Итерация 3 (автоматизация и масштабирование).
